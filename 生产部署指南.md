# ğŸŒ AIè¯­æ–‡åŠ©æ‰‹ - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²é€‰é¡¹

### æ–¹æ¡ˆä¸€ï¼šä¼ ç»ŸVPS/äº‘æœåŠ¡å™¨éƒ¨ç½²

#### 1. æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3 python3-pip nginx git

# CentOS/RHEL
sudo yum install python3 python3-pip nginx git
```

#### 2. éƒ¨ç½²åç«¯API
```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd AIè¯­æ–‡/backend

# å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
export QWEN_API_KEY="your_qwen_api_key"
export DEEPSEEK_API_KEY="your_deepseek_api_key"

# ä½¿ç”¨Gunicornéƒ¨ç½²
pip3 install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

#### 3. é…ç½®Nginxåå‘ä»£ç†
```nginx
# /etc/nginx/sites-available/ai-chinese
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/AIè¯­æ–‡;
        index app.html;
        try_files $uri $uri/ /app.html;
    }

    # åç«¯APIä»£ç†
    location /api/ {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### 4. å¯ç”¨ç«™ç‚¹
```bash
sudo ln -s /etc/nginx/sites-available/ai-chinese /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### æ–¹æ¡ˆäºŒï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²

#### 1. åˆ›å»ºDockerfile
```dockerfile
# åç«¯Dockerfile
FROM python:3.9-slim

WORKDIR /app
COPY backend/requirements.txt .
RUN pip install -r requirements.txt

COPY backend/ .
EXPOSE 5000

CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "app:app"]
```

#### 2. åˆ›å»ºdocker-compose.yml
```yaml
version: '3.8'
services:
  backend:
    build: .
    ports:
      - "5000:5000"
    environment:
      - QWEN_API_KEY=${QWEN_API_KEY}
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
    restart: unless-stopped

  frontend:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./:/usr/share/nginx/html
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - backend
    restart: unless-stopped
```

#### 3. éƒ¨ç½²å‘½ä»¤
```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### æ–¹æ¡ˆä¸‰ï¼šå…è´¹æ‰˜ç®¡å¹³å°éƒ¨ç½²

#### Verceléƒ¨ç½²ï¼ˆå‰ç«¯ï¼‰
```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# éƒ¨ç½²å‰ç«¯
vercel

# é…ç½®vercel.json
{
  "functions": {
    "api/[...].js": {
      "runtime": "nodejs18.x"
    }
  },
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "https://your-backend-url.com/api/$1"
    }
  ]
}
```

#### Railwayéƒ¨ç½²ï¼ˆåç«¯ï¼‰
```bash
# å®‰è£…Railway CLI
npm install -g @railway/cli

# ç™»å½•å¹¶éƒ¨ç½²
railway login
railway init
railway up
```

## ğŸ”§ ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

### 1. æ€§èƒ½ä¼˜åŒ–
```python
# backend/app.py æ·»åŠ ç¼“å­˜
from flask_caching import Cache

cache = Cache(app, config={'CACHE_TYPE': 'simple'})

@app.route('/api/chat', methods=['POST'])
@cache.cached(timeout=300, key_prefix='chat')
def chat():
    # ... åŸæœ‰ä»£ç 
```

### 2. å®‰å…¨é…ç½®
```python
# æ·»åŠ CORSé…ç½®
from flask_cors import CORS

CORS(app, origins=['https://your-domain.com'])

# æ·»åŠ APIé™æµ
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address

limiter = Limiter(
    app,
    key_func=get_remote_address,
    default_limits=["100 per hour"]
)
```

### 3. ç›‘æ§å’Œæ—¥å¿—
```python
# æ·»åŠ æ—¥å¿—é…ç½®
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s %(levelname)s %(message)s',
    handlers=[
        logging.FileHandler('app.log'),
        logging.StreamHandler()
    ]
)
```

## ğŸ”‘ APIå¯†é’¥é…ç½®

### ç¯å¢ƒå˜é‡æ–¹å¼ï¼ˆæ¨èï¼‰
```bash
# Linux/Mac
export QWEN_API_KEY="your_key"
export DEEPSEEK_API_KEY="your_key"

# Windows
set QWEN_API_KEY=your_key
set DEEPSEEK_API_KEY=your_key
```

### é…ç½®æ–‡ä»¶æ–¹å¼
```python
# backend/config.py
import os

class Config:
    QWEN_API_KEY = os.environ.get('QWEN_API_KEY')
    DEEPSEEK_API_KEY = os.environ.get('DEEPSEEK_API_KEY')
```

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] åç«¯APIæœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] å‰ç«¯é¡µé¢å¯ä»¥è®¿é—®
- [ ] AIåŠ©æ‰‹æŒ‰é’®å¯ä»¥ç‚¹å‡»
- [ ] APIå¯†é’¥é…ç½®æ­£ç¡®
- [ ] CORSé…ç½®å…è®¸è·¨åŸŸ
- [ ] HTTPSè¯ä¹¦é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] åŸŸåDNSè§£ææ­£ç¡®
- [ ] é˜²ç«å¢™ç«¯å£å¼€æ”¾
- [ ] æœåŠ¡è¿›ç¨‹å®ˆæŠ¤é…ç½®
- [ ] æ—¥å¿—ç›‘æ§é…ç½®

## ğŸ› æ•…éšœæ’æŸ¥

### å‰ç«¯æ— æ³•è®¿é—®åç«¯
1. æ£€æŸ¥API URLé…ç½®
2. ç¡®è®¤CORSè®¾ç½®
3. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚é”™è¯¯

### AIåŠŸèƒ½ä¸å·¥ä½œ
1. æ£€æŸ¥APIå¯†é’¥
2. ç¡®è®¤æ¨¡å‹å¯ç”¨æ€§
3. æŸ¥çœ‹åç«¯æ—¥å¿—

### æ€§èƒ½é—®é¢˜
1. å¯ç”¨CDNåŠ é€Ÿ
2. ä¼˜åŒ–å›¾ç‰‡èµ„æº
3. å¯ç”¨Gzipå‹ç¼©
4. é…ç½®ç¼“å­˜ç­–ç•¥
