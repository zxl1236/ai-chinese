<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>记叙文写作训练</title>
    <link rel="stylesheet" href="writing.css">
</head>
<body>
    <div class="writing-layout">
        <!-- 遮罩层 -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <!-- 左侧题目选择区 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2 id="current-category-title">📋 全命题作文训练</h2>
                
                <!-- 文体选择 -->
                <div class="category-selector">
                    <select id="writing-category" class="category-select">
                        <option value="全命题作文">📋 全命题作文</option>
                        <option value="半命题作文">📝 半命题作文</option>
                        <option value="话题作文">💭 话题作文</option>
                        <option value="材料作文">📄 材料作文</option>
                        <option value="应用文">📧 应用文</option>
                    </select>
                </div>
                
                <!-- 题型分类标签 -->
                <div class="difficulty-tabs" id="difficulty-tabs">
                    <button class="difficulty-tab active" data-difficulty="成长体验类">成长体验</button>
                    <button class="difficulty-tab" data-difficulty="情感感悟类">情感感悟</button>
                    <button class="difficulty-tab" data-difficulty="生活写实类">生活写实</button>
                </div>
            </div>
            
            <div class="topics-list" id="topics-list">
                <!-- 题目列表将在这里动态生成 -->
            </div>
            
            <!-- 草稿箱 -->
            <div class="drafts-section">
                <button class="drafts-toggle" id="drafts-toggle">
                    📂 草稿箱 (<span id="drafts-count">0</span>)
                </button>
                <div class="drafts-list" id="drafts-list" style="display: none;">
                    <!-- 草稿列表 -->
                </div>
            </div>
        </div>

        <!-- 主要写作区域 -->
        <div class="main-content" id="main-content">
            <!-- 移动端侧边栏切换按钮 -->
            <button class="sidebar-toggle" id="sidebar-toggle">
                <span id="toggle-icon">☰</span>
            </button>
            
            <!-- 题目信息头部 -->
            <div class="topic-header" id="topic-header" style="display: none;">
                <div class="topic-info">
                    <h1 id="current-title">请选择一个题目开始写作</h1>
                    <div class="topic-content">
                        <div class="topic-description">
                            <p id="current-description"></p>
                        </div>
                        <div class="topic-requirements">
                            <div class="requirements-label">要求：</div>
                            <div class="requirements-content" id="requirements"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 写作区域 -->
            <div class="writing-area" id="writing-area" style="display: none;">
                <!-- 标题输入 -->
                <div class="title-section">
                    <input type="text" id="article-title" placeholder="请输入文章标题..." class="title-input">
                </div>

                <!-- 工具栏 -->
                <div class="toolbar">
                    <div class="format-tools">
                        <button class="tool-btn" id="bold" title="加粗">B</button>
                        <button class="tool-btn" id="italic" title="斜体">I</button>
                        <button class="tool-btn" id="underline" title="下划线">U</button>
                        <button class="tool-btn" id="image-upload" title="插入图片">🖼️</button>
                    </div>
                    <div class="writing-stats">
                        <span class="word-count">字数: <span id="word-count">0</span></span>
                        <span class="save-status" id="save-status">未保存</span>
                    </div>
                </div>

                <!-- 内容编辑区 -->
                <div class="content-editor" id="content-editor" contenteditable="true" placeholder="开始你的写作..."></div>

                <!-- 图片上传区域（隐藏） -->
                <input type="file" id="image-input" accept="image/*" style="display: none;">

                <!-- 操作按钮 -->
                <div class="action-buttons">
                    <button class="help-btn" id="show-guide">💡 写作指导</button>
                    <button class="save-btn" id="save-draft">💾 保存草稿</button>
                    <button class="secondary-btn" id="clear-btn">🗑️ 清空</button>
                    <button class="secondary-btn" id="export-md">📄 导出MD</button>
                    <button class="secondary-btn" id="export-pdf">📑 导出PDF</button>
                    <button class="primary-btn" id="submit-btn">✅ 完成写作</button>
                </div>
            </div>

            <!-- 欢迎页面 -->
            <div class="welcome-page" id="welcome-page">
                <div class="welcome-content">
                    <h1>🌟 记叙文写作训练</h1>
                    <p>选择左侧的题目开始你的写作训练吧！</p>
                    <div class="welcome-features">
                        <div class="feature-item">
                            <div class="feature-icon">📚</div>
                            <div class="feature-text">
                                <h3>分级训练</h3>
                                <p>从基础到挑战，循序渐进</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">💡</div>
                            <div class="feature-text">
                                <h3>写作指导</h3>
                                <p>详细的写作要点和技巧</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">📂</div>
                            <div class="feature-text">
                                <h3>草稿保存</h3>
                                <p>自动保存，随时恢复</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 写作指导侧边栏 -->
        <div class="help-sidebar" id="help-sidebar">
            <div class="help-header">
                <h3>💡 写作指导</h3>
                <button class="close-help" id="close-help">×</button>
            </div>
            <div class="help-content" id="help-content">
                <div class="help-section">
                    <h4>💡 考试提示</h4>
                    <div id="exam-tips-help" class="exam-tips-help"></div>
                </div>
                <div class="help-section">
                    <h4>写作要点</h4>
                    <div id="tips-content"></div>
                </div>
                <div class="help-section">
                    <h4>参考大纲</h4>
                    <div id="outline-content"></div>
                </div>
                <div class="help-section">
                    <h4>写作技巧</h4>
                    <div class="techniques">
                        <p>• 开头要吸引读者注意</p>
                        <p>• 中间要详略得当</p>
                        <p>• 结尾要总结升华</p>
                        <p>• 语言要生动具体</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 草稿详情弹窗 -->
    <div class="draft-modal" id="draft-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>草稿详情</h3>
                <button class="close-modal" id="close-draft-modal">×</button>
            </div>
            <div class="modal-body" id="draft-modal-body">
                <!-- 草稿内容 -->
            </div>
            <div class="modal-footer">
                <button class="secondary-btn" id="delete-draft">删除草稿</button>
                <button class="primary-btn" id="load-draft">加载草稿</button>
            </div>
        </div>
    </div>

    <!-- 加载数据文件 -->
    <script src="../data/writing-prompts.js"></script>
    <script src="writing.js"></script>
</body>
</html>