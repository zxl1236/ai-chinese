{% extends "base.html" %}

{% block title %}æ¨¡å—ç®¡ç† - AIè¯­æ–‡å­¦ä¹ åŠ©æ‰‹{% endblock %}

{% block content %}
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>ğŸ“š å­¦ä¹ æ¨¡å—ç®¡ç†</h1>
        <a href="{{ url_for('content_page.add_module') }}" class="btn btn-success">â• æ·»åŠ æ–°æ¨¡å—</a>
    </div>

<div class="card">
    {% if modules %}
        <table class="table">
            <thead>
                <tr>
                    <th>æ¨¡å—ID</th>
                    <th>æ ‡é¢˜</th>
                    <th>ç±»åˆ«</th>
                    <th>éš¾åº¦</th>
                    <th>å›¾æ ‡</th>
                    <th>çŠ¶æ€</th>
                    <th>åˆ›å»ºæ—¶é—´</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for module in modules %}
                <tr>
                    <td><code>{{ module.module_id }}</code></td>
                    <td>{{ module.title }}</td>
                    <td>
                        {% if module.category == 'basic' %}
                            <span class="badge badge-info">åŸºç¡€è®­ç»ƒ</span>
                        {% elif module.category == 'reading' %}
                            <span class="badge badge-success">é˜…è¯»ç†è§£</span>
                        {% elif module.category == 'writing' %}
                            <span class="badge badge-warning">å†™ä½œè¡¨è¾¾</span>
                        {% endif %}
                    </td>
                    <td>
                        {% for i in range(module.difficulty) %}â­{% endfor %}
                    </td>
                    <td style="font-size: 1.5rem;">{{ module.icon }}</td>
                    <td>
                        {% if module.is_active %}
                            <span class="badge badge-success">æ´»è·ƒ</span>
                        {% else %}
                            <span class="badge" style="background-color: #6c757d; color: white;">ç¦ç”¨</span>
                        {% endif %}
                    </td>
                    <td>{{ module.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td>
                        <div class="actions">
                            <a href="{{ url_for('content_page.list_content', module_id=module.module_id) }}" class="btn btn-small">ğŸ“„ å†…å®¹</a>
                            <a href="{{ url_for('content_page.edit_module', module_id=module.module_id) }}" class="btn btn-small">âœï¸ ç¼–è¾‘</a>
                            <form method="POST" action="{{ url_for('content_page.delete_module', module_id=module.module_id) }}" style="display: inline;" onsubmit="return confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ¨¡å—å—ï¼Ÿè¿™å°†åŒæ—¶åˆ é™¤æ‰€æœ‰ç›¸å…³å†…å®¹ã€‚')">
                                <button type="submit" class="btn btn-danger btn-small">ğŸ—‘ï¸ åˆ é™¤</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div style="text-align: center; padding: 3rem;">
            <h3>ğŸ“ è¿˜æ²¡æœ‰ä»»ä½•å­¦ä¹ æ¨¡å—</h3>
            <p>ç‚¹å‡»ä¸Šæ–¹çš„"æ·»åŠ æ–°æ¨¡å—"æŒ‰é’®å¼€å§‹åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªå­¦ä¹ æ¨¡å—</p>
            <br>
            <a href="{{ url_for('content_page.add_module') }}" class="btn btn-success">â• æ·»åŠ æ–°æ¨¡å—</a>
        </div>
    {% endif %}
</div>
{% endblock %}
