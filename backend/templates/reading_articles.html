{% extends "base.html" %}

{% block title %}é˜…è¯»æ–‡ç« ç®¡ç† - AIè¯­æ–‡å­¦ä¹ åŠ©æ‰‹{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h1>ğŸ“š é˜…è¯»æ–‡ç« ç®¡ç†</h1>
    <a href="{{ url_for('content_page.add_reading_article') }}" class="btn btn-success">â• æ·»åŠ æ–°æ–‡ç« </a>
</div>

<div class="card">
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>æ–‡ç« æ ‡é¢˜</th>
                    <th>ä½œè€…</th>
                    <th>ç±»åˆ«</th>
                    <th>éš¾åº¦</th>
                    <th>å­—æ•°</th>
                    <th>é¢˜ç›®æ•°</th>
                    <th>çŠ¶æ€</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for article in articles %}
                <tr>
                    <td>{{ article.id }}</td>
                    <td>
                        <strong>{{ article.title }}</strong>
                        <br>
                        <small style="color: #666;">{{ article.content[:50] }}{% if article.content|length > 50 %}...{% endif %}</small>
                    </td>
                    <td>{{ article.author or 'æœªçŸ¥' }}</td>
                    <td>
                        <span class="badge">
                            {% if article.category == 'literature' %}ğŸ“– æ–‡å­¦{% elif article.category == 'classical' %}ğŸ“œ æ–‡è¨€æ–‡{% else %}ğŸ“° å…¶ä»–{% endif %}
                        </span>
                    </td>
                    <td>
                        <div class="difficulty">
                            {% for i in range(article.difficulty) %}â­{% endfor %}
                        </div>
                    </td>
                    <td>{{ article.word_count or 0 }} å­—</td>
                    <td>{{ article.questions|length }} é¢˜</td>
                    <td>
                        {% if article.is_active %}
                            <span class="status-active">âœ… å¯ç”¨</span>
                        {% else %}
                            <span class="status-inactive">âŒ ç¦ç”¨</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a href="{{ url_for('content_page.view_reading_article', article_id=article.id) }}" class="btn btn-sm">ğŸ‘€ æŸ¥çœ‹</a>
                            <a href="{{ url_for('content_page.edit_reading_article', article_id=article.id) }}" class="btn btn-sm">âœï¸ ç¼–è¾‘</a>
                            <form method="POST" action="{{ url_for('content_page.toggle_reading_article', article_id=article.id) }}" style="display: inline;">
                                <button type="submit" class="btn btn-sm">
                                    {% if article.is_active %}âŒ ç¦ç”¨{% else %}âœ… å¯ç”¨{% endif %}
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
.badge {
    padding: 0.25rem 0.5rem;
    background: #e3f2fd;
    color: #1976d2;
    border-radius: 12px;
    font-size: 0.85rem;
}

.difficulty {
    font-size: 1.1rem;
    color: #ff9800;
}

.status-active {
    color: #4caf50;
    font-weight: bold;
}

.status-inactive {
    color: #f44336;
    font-weight: bold;
}

.action-buttons {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.85rem;
}

.table-container {
    overflow-x: auto;
}

.table th, .table td {
    vertical-align: middle;
    min-width: 80px;
}
</style>
{% endblock %}
