{% extends "base.html" %}

{% block title %}{{ module.title }} - å†…å®¹ç®¡ç†{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <div>
        <h1>ğŸ“„ {{ module.title }} - å†…å®¹ç®¡ç†</h1>
        <p style="color: #666; margin-top: 0.5rem;">{{ module.description }}</p>
    </div>
    <div style="display: flex; gap: 1rem;">
        <a href="{{ url_for('content_page.add_content', module_id=module.module_id) }}" class="btn btn-success">â• æ·»åŠ å†…å®¹</a>
        <a href="{{ url_for('content_page.list_modules') }}" class="btn">â† è¿”å›æ¨¡å—åˆ—è¡¨</a>
    </div>
</div>

<div class="card" style="margin-bottom: 1rem;">
    <div style="display: flex; align-items: center; gap: 1rem;">
        <span style="font-size: 2rem;">{{ module.icon }}</span>
        <div>
            <h3>{{ module.title }}</h3>
            <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                {% if module.category == 'basic' %}
                    <span class="badge badge-info">åŸºç¡€è®­ç»ƒ</span>
                {% elif module.category == 'reading' %}
                    <span class="badge badge-success">é˜…è¯»ç†è§£</span>
                {% elif module.category == 'writing' %}
                    <span class="badge badge-warning">å†™ä½œè¡¨è¾¾</span>
                {% endif %}
                
                <span class="badge" style="background-color: #6f42c1; color: white;">
                    {% for i in range(module.difficulty) %}â­{% endfor %} éš¾åº¦
                </span>
                
                {% if module.is_active %}
                    <span class="badge badge-success">å·²å¯ç”¨</span>
                {% else %}
                    <span class="badge" style="background-color: #6c757d; color: white;">å·²ç¦ç”¨</span>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="card">
    {% if contents %}
        <table class="table">
            <thead>
                <tr>
                    <th>é¡ºåº</th>
                    <th>æ ‡é¢˜</th>
                    <th>ç±»å‹</th>
                    <th>å†…å®¹é¢„è§ˆ</th>
                    <th>çŠ¶æ€</th>
                    <th>åˆ›å»ºæ—¶é—´</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for content in contents %}
                <tr>
                    <td><strong>{{ content.order_index }}</strong></td>
                    <td>{{ content.title }}</td>
                    <td>
                        {% if content.content_type == 'text' %}
                            <span class="badge badge-info">ğŸ“ æ–‡æœ¬</span>
                        {% elif content.content_type == 'image' %}
                            <span class="badge badge-success">ğŸ–¼ï¸ å›¾ç‰‡</span>
                        {% elif content.content_type == 'video' %}
                            <span class="badge badge-warning">ğŸ¥ è§†é¢‘</span>
                        {% elif content.content_type == 'exercise' %}
                            <span class="badge" style="background-color: #6f42c1; color: white;">ğŸ¯ ç»ƒä¹ </span>
                        {% else %}
                            <span class="badge" style="background-color: #6c757d; color: white;">ğŸ“„ å…¶ä»–</span>
                        {% endif %}
                    </td>
                    <td style="max-width: 300px;">
                        <div style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            {{ content.content[:100] }}{% if content.content|length > 100 %}...{% endif %}
                        </div>
                    </td>
                    <td>
                        {% if content.is_active %}
                            <span class="badge badge-success">æ´»è·ƒ</span>
                        {% else %}
                            <span class="badge" style="background-color: #6c757d; color: white;">ç¦ç”¨</span>
                        {% endif %}
                    </td>
                    <td>{{ content.created_at.strftime('%m-%d %H:%M') }}</td>
                    <td>
                        <div class="actions">
                            <a href="{{ url_for('content_page.edit_content', content_id=content.id) }}" class="btn btn-small">âœï¸ ç¼–è¾‘</a>
                            <form method="POST" action="{{ url_for('content_page.delete_content', content_id=content.id) }}" style="display: inline;" onsubmit="return confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå†…å®¹å—ï¼Ÿ')">
                                <button type="submit" class="btn btn-danger btn-small">ğŸ—‘ï¸ åˆ é™¤</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div style="text-align: center; padding: 3rem;">
            <h3>ğŸ“ è¯¥æ¨¡å—è¿˜æ²¡æœ‰ä»»ä½•å†…å®¹</h3>
            <p>ç‚¹å‡»"æ·»åŠ å†…å®¹"æŒ‰é’®å¼€å§‹ä¸ºè¿™ä¸ªæ¨¡å—æ·»åŠ å­¦ä¹ å†…å®¹</p>
            <br>
            <a href="{{ url_for('content_page.add_content', module_id=module.module_id) }}" class="btn btn-success">â• æ·»åŠ å†…å®¹</a>
        </div>
    {% endif %}
</div>

{% if contents %}
<div class="card">
    <h3>ğŸ’¡ å†…å®¹ç®¡ç†æç¤º</h3>
    <ul style="line-height: 1.6; padding-left: 2rem;">
        <li><strong>å†…å®¹é¡ºåºï¼š</strong>é€šè¿‡"é¡ºåº"å­—æ®µæ§åˆ¶å†…å®¹çš„æ˜¾ç¤ºé¡ºåºï¼Œæ•°å­—è¶Šå°è¶Šé å‰</li>
        <li><strong>å†…å®¹ç±»å‹ï¼š</strong>
            <ul style="margin-top: 0.5rem;">
                <li><strong>æ–‡æœ¬ï¼š</strong>æ™®é€šçš„æ–‡å­—å†…å®¹ã€è¯´æ˜ç­‰</li>
                <li><strong>å›¾ç‰‡ï¼š</strong>å›¾ç‰‡URLæˆ–Base64ç¼–ç çš„å›¾ç‰‡</li>
                <li><strong>è§†é¢‘ï¼š</strong>è§†é¢‘URLæˆ–åµŒå…¥ä»£ç </li>
                <li><strong>ç»ƒä¹ ï¼š</strong>äº’åŠ¨ç»ƒä¹ é¢˜ã€æµ‹è¯•ç­‰</li>
            </ul>
        </li>
        <li><strong>çŠ¶æ€æ§åˆ¶ï¼š</strong>ç¦ç”¨çš„å†…å®¹ä¸ä¼šåœ¨APIä¸­è¿”å›ç»™å‰ç«¯</li>
    </ul>
</div>
{% endif %}
{% endblock %}
